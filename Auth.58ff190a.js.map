{"version":3,"sources":["utils/request/Auth.js","utils/url.js","components/Dialog/index.js","pages/Auth/index.js"],"names":["getAccessToken","axios","get","params","client_id","client_secret","code","sessionStorage","getItem","str2Obj","str","split","reduce","counter","currentVal","val","Dialog","css","dialog","content","props","children","Component","url","Auth","username","value","pwd","window","localStorage","setItem","btoa","history","push","search","location","slice","input","ref","btn","handleSubmit"],"mappings":"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","file":"Auth.58ff190a.js","sourceRoot":"../src","sourcesContent":["import axios from 'axios'\n\nexport function getAccessToken() {\n  const url = 'https://github.com/login/oauth/access_token'\n\n  return axios.get(url, {\n    params: {\n      client_id: '1fd37dbf8bbc4d6bff18',\n      client_secret: '32828e0d61c494be7088d1f64a4b446951de0f77',\n      code: sessionStorage.getItem('git_code')\n    }\n  })\n}","export const str2Obj = (str) => {\n  return str\n  .split('&')\n  .reduce((counter, currentVal) => {\n    const val = currentVal.split('=')\n    counter[val[0]] = val[1]\n    return counter\n  }, {})\n}","import React, {Component} from 'react'\nimport css from './index.scss'\n\nclass Dialog extends Component {\n  render() {\n    return (\n      <div className={css.dialog}>\n        <div className={css.content}>\n          {this.props.children}\n        </div>\n      </div>\n    )\n  }\n}\n\nexport default Dialog","import React, {Component} from 'react'\nimport {withRouter} from 'react-router-dom'\nimport {getAccessToken} from '../../utils/request/Auth'\nimport {str2Obj} from '../../utils/url'\nimport Dialog from '../../components/Dialog'\nimport css from './index.scss'\n\nconst url = 'https://github.com/login/oauth/authorize?client_id=1fd37dbf8bbc4d6bff18'\n\nclass Auth extends Component {\n\n  componentDidMount() {\n    const search = window.location.search\n    if (!search) {\n      // window.location.href = url\n    } else {\n      const {code} = str2Obj(search.slice(1))\n      window.sessionStorage.setItem('git_code', code)\n      // getAccessToken().then(res => {\n      //   const data = str2Obj(res.data)\n      //   if (data.error) {\n      //     // todo handle err.\n      //   } else {\n      //     window.localStorage.setItem('git_access_token', data.access_token)\n      //   }\n\n      //   this.props.history.push('/')\n      // })\n    }\n  }\n  render() {\n    return (\n      <div>\n        Authing...\n        <Dialog place={['top', 'right']}>\n          <p className={css.input}>\n            <input type=\"text\" name=\"username\" placeholder='name' ref={ref => this.username = ref}/>\n          </p>\n          <p className={css.input}>\n            <input type=\"password\" name=\"pwd\" placeholder='pwd' ref={ref => this.pwd = ref}/>\n          </p>\n          <button className={css.btn} type=\"submit\" onClick={this.handleSubmit}>Submit</button>\n        </Dialog>\n      </div>\n    )\n  }\n\n  handleSubmit = () => {\n    const username = this.username.value\n    const pwd = this.pwd.value\n\n    window.localStorage.setItem('__auth', btoa(username + ':' + pwd))\n\n    this.username.value = ''\n    this.pwd.value = ''\n\n    this.props.history.push('/')\n  }\n}\n\nexport default withRouter(Auth)"]}